enum EventType {
  Stake
  NFTStake
  Unstake
  NFTUnstake
  Claim
}

type Request @entity {
  id: ID!

  ipfsHash: String!

  deployer: String!

  requestStatus: BigInt!

  stakeToken: Token!

  rewardToken: Token!

  poolStartTime: BigInt!

  poolEndTime: BigInt!

  rewardPerSecond: BigInt!

  unstakeLockUpTime: BigInt!

  claimLockUpTime: BigInt!

  penaltyPeriod: BigInt!
}

type Factory @entity {
  id: ID!

  totalPools: BigInt!

  poolAddress: [String!]!
}

type Token @entity(immutable: true) {
  id: ID!

  name: String!

  symbol: String!

  decimals: BigInt!
}

type NFToken @entity(immutable: true) {
  id: ID!
 
  tokenId: String!
 
  owner: User!
 
  pool: Pool!
}

type Pool @entity {
  id: ID!

  stakeToken: Token!

  stakeNFToken: NFToken!
  
  rewardToken: Token!
  
  startTime: BigInt!
  
  endTime: BigInt!

  unstakeLockUpTime: BigInt!

  claimLockUpTime: BigInt!

  penaltyPeriod: BigInt!

  totalPenalties: BigInt!
  
  rewardTokenPerSecond: BigInt!
  
  totalStaked: BigInt!
  
  totalClaimed: BigInt!

  lastRewardTimestamp: BigInt!

  accRewardPerShare: BigInt!

  owner: String!
  
  # List of users participating in the pool
  users: [History!]! @derivedFrom(field: "pool")
}

type History @entity {
  id: ID!

  user: User!

  pool: Pool!

  amount: BigInt!

  tokenIds: [String!]

  timestamp: BigInt!

  event_type: EventType!
}

type User @entity {
  id: ID!
   
  amount: BigInt!
 
  claimed: BigInt!
 
  rewardDebt: BigInt!
 
  pending: BigInt!

  address: Bytes!
 
  pools: [History!]! @derivedFrom(field: "user")

  nftokens: [NFToken!]! @derivedFrom(field: "owner")
}